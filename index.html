<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name="author" content="Kevin Pors">
    <meta name="description" content="RUMAG niet stelen, maar doen ze wel, dus jij ook!">
    <title>BRUMAG.</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-164351811-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-164351811-1');
    </script>
</head>

<body>
    <header>
        <h1>BRUMAG.</h1>

        Maak hier je irritante-met-puntjes-geschreven-tekst zelf en strijk met de
        eer van originaliteit! Of juist niet. Ik weet het niet. Hier zijn wat
        citaten:

        <blockquote>
            "RUMAG is kut!"
            <cite>&mdash; Rationele mensen</cite>
        </blockquote>

        <blockquote>
            "RUMAG is leuk, maar na de Lubach uitzending heb ik ze toch maar ontvolgd."
            <cite>&mdash; Mijn vrouw</cite>
        </blockquote>


        <blockquote>
            "RUMAG kopieert, jij imiteert!"
            <cite>&mdash; Ik</cite>
        </blockquote>
    </header>

    Volg deze 7 stappen tot het behalen van je succes. Let op: als het lettertype
    niet meteen goed is in het plaatje, ververs dan de pagina.

    <h2>Stap 1: je zogenaamd leuke tekst</h2>
    <textarea id="thetext" rows="8">wow nu kan je zelf je eigen
lompe rumag teksten maken

wat leven we toch
in een prachtige tijd</textarea>

    <h2>Stap 2: je hippe EST tekst</h2>
    <input type="text" id="est" value="MCMLMCLX" />

    <h2>Stap 3: je dope merknaam</h2>
    <input type="text" id="brentnaam" value="brumag" />

    <h2>Stap 4: verticale uitlijning</h2>

    <div class="row">
        <div class="column">
            <button class="align" data-amount="-20">-20</button>
            <button class="align" data-amount="-5">-5</button>
            <hr/>
            <button class="align" data-amount="5">+5</button>
            <button class="align" data-amount="20">+20</button>
        </div>
        <div class="column">
            <canvas id="canvas" width="900" height="900"></canvas>
        </div>
      </div>

    <h2>Stap 5: opslaan!</h2>

    Gebruik je rechtermuisknop om het op te slaan als een plaatje of <button id="save">Download</button>.
    Dit werkt soms of soms niet op mobile.

    <h2>Stap 6: ???</h2>
    ???

    <h2>Stap 7: profiteer</h2>
    Dat dus.

    <h2>F.A.Q.</h2>

    <p>
        <div class="q">Q: Krijg de blafhoest, kan dit niet gebruikersvriendelijker?</div>
        <div class="a">A: Ja vast wel. <a href="https://github.com/krpors/brumag/">Maak een PR</a> als je het beter kan, of fork
        de repository en doe het zelf.</div>
    </p>

    <p>
        <div class="q">Q: Is dit legaal?</div>
        <div class="a">A: Ik denk het wel. RUMAG plagieert ook. Het enige wat ik gebruik is de achtergrond.
            En ik heb daar teveel tijd aan besteed om die zo schoon mogelijk te krijgen (ik kon de originele achtergrond niet vinden).
            Het lettertype is van de interwebs te downloaden en de rest heb ik zelf gemaakt.</div>
    </p>

    <p>
        <div class="q">Q: Waarom heb je dit gemaakt?</div>
        <div class="a">A: Inception. Ineens krijg je een idee. Ben ik er trots op? Nee, want dit werkt natuurlijk vervelende RUMAGGERS in de hand.</div>
    </p>

    <p>
        <div class="q">Q: Waarom laat je het dan online staan?</div>
        <div class="a">A: In de hoop dat de draak gestoken wordt met RUMAG.</div>
    </p>

    <p>
        <div class="q">Q: Gast, zo'n generator bestaat al op internet!</div>
        <div class="a">A: Waar dan? Ik heb 5 seconden gezocht maar kon niets vinden dus heb ik het zelf maar gedaan.</div>
    </p>

    <p>
        <div class="q">Q: Ik wil graag kleine letters (lowercase)!!</div>
        <div class="a">A: Doe even normaal. Wil je nou imiteren of niet?</div>
    </p>

    <p>
        <div class="q">Q: Ik wil geen puntjes, maar <code>LUBAG,</code> stijl. Kan dat?</div>
        <div class="a">A: Misschien in de toekomst als ik er zin in heb. <a href="https://github.com/krpors/brumag/">Of maak een PR</a>.</div>
    </p>

    <p>
        <div class="q">Q: Je code ziet er niet uit. Waarom niet?</div>
        <div class="a">A: Ik heb het effe in een paar uur in elkaar geflanst terwijl ik wat beters te doen had. Geen zin in verbetering.
            Ik was nog niet helemaal bekend met het &lt;canvas&gt; element enz.</div>
    </p>

    <p>
        <div class="q">Q: Waarom BRUMAG.?</div>
        <div class="a">A: Het is een Porte-manteauwoord van mijn beste maatje en het woordje MAG. Hoera!</div>
    </p>

    <footer class="author">
        Kevin Pors, 2020.<br/>
        <a href="https://github.com/krpors/brumag/">Repository is hier.</a>
    </footer>

    <script>
        var canvas = document.getElementById("canvas");
        var context = canvas.getContext("2d");
        var imageObj = new Image();

        imageObj.onload = function () {
            var textarea = document.getElementById("thetext");
            updateCanvas(textarea.value, 330, "MCMCMCL", "brumag");
        }
        imageObj.src = "rumag.png";

        var align = 330;

        function brumagify(text) {
            var text = text.toUpperCase();
            text = text.replace(/ /g, ".");
            text = text.replace(/(.)$/gm, "$1.");
            return text;
        }

        function updateCanvas(text, starty, est, brentnaam) {
            context.save()
            context.drawImage(imageObj, 0, 0);
            context.restore();

            context.save();

            var lineHeight = 52;
            var textHeight = 0;

            text = brumagify(text);
            var lines = text.split("\n");

            context.translate(450, align);

            context.font = "50pt AlternateGothic";
            context.fillStyle = "white";
            context.textAlign = "center";

            for (var i = 0; i < lines.length; i++) {
                context.fillText(lines[i], 0, (i * lineHeight));

                textHeight += lineHeight;
            }

            context.font = "16pt AlternateGothic";

            var est = est.toUpperCase();
            var brentnaam = brumagify(brentnaam);

            context.fillText("- EST. " + est + " -", 0, textHeight + 10);

            context.font = "40pt AlternateGothic";
            context.fillText(brentnaam, 0, textHeight + 55);

            context.restore();
        }

        var textarea = document.getElementById("thetext");
        textarea.onkeyup = function (ta) {
            console.log("ke y up")
            updateCanvas(ta.target.value, align, est.value, brentnaam.value);
        }

        var est = document.getElementById("est");
        est.onkeyup = function(e) {
            updateCanvas(textarea.value, align, est.value, brentnaam.value);
        }

        var brentnaam = document.getElementById("brentnaam");
        brentnaam.onkeyup = function(e) {
            updateCanvas(textarea.value, align, est.value, brentnaam.value);
        }

        var button = document.getElementById("save");
        button.onclick = function(e) {
              // here is the most important part because if you dont replace you will get a DOM 18 exception.
            var image = canvas.toDataURL("image/png");
            window.location.href=image;
        }

        var alignElements = document.getElementsByClassName("align");
        for(var i = 0; i < alignElements.length; i++) {
            var el = alignElements[i];
            el.onclick = function(e) {
                var amount = Number(e.target.getAttribute("data-amount"));
                align += amount;
                updateCanvas(textarea.value, align, est.value, brentnaam.value);
            }
        }
    </script>

</body>

</html>
